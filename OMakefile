USE_OCAMLFIND = true

OCAMLFLAGS += -thread -short-paths
OCAMLOPTFLAGS += -inline 1000

OCAMLPACKS[] =  \
  core          \
  uint          \
  res           \
  ocplib-endian

NATIVE_ENABLED = true
BYTE_ENABLED   = true

PREFIX = $(getenv PREFIX,/usr/local)

if $(defined-env DESTDIR)
  DESTDIR = $(getenv DESTDIR)/
  export
else
  DESTDIR = $(EMPTY)
  export

.SUBDIRS: src

.PHONY: clean distclean install uninstall all-bench

clean: runtime-clean compiler-clean

distclean: clean src-distclean runtime-distclean compiler-distclean
	rm -f *.omc .omakedb .omakedb.lock

install: compiler-install runtime-install

uninstall: compiler-uninstall runtime-uninstall

